<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Title -->
    <title>Sistem Stimulasi Dan Intervensi Anak 1 Hingga 5 Tahun - Halaman Pendaftaran</title>

    <!-- Favicon -->
    <link rel="icon" href="./img/core-img/favicon.png">

    <!-- Stylesheet -->
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="sweet-alert/sweetalert.css">
    <style>
        /* center the title and text of sweet alert */
        .swal-title,.swal-text {
            text-align: center;
        }

        

    </style>

</head>

<body>
    <!-- Preloader -->
    <div id="preloader">
        <div class="loader"></div>
    </div>
    <!-- /Preloader -->

    <!-- Header Area Start -->
    <header class="header-area">
        <!-- Main Header Start -->
        <div class="main-header-area">
            <div class="classy-nav-container breakpoint-off">
                <div class="container">
                    <!-- Classy Menu -->
                    <nav class="classy-navbar justify-content-between" id="alimeNav">

                        <!-- Logo -->
                        <a class="nav-brand" href="./index.html"><img src="./img/core-img/logo.png" alt=""></a>

                        <!-- Navbar Toggler -->
                        <div class="classy-navbar-toggler">
                            <span class="navbarToggler"><span></span><span></span><span></span></span>
                        </div>

                        <!-- Menu -->
                        <div class="classy-menu">
                            <!-- Menu Close Button -->
                            <div class="classycloseIcon">
                                <div class="cross-wrap"><span class="top"></span><span class="bottom"></span></div>
                            </div>
                            <!-- Nav Start -->
                            <div class="classynav">
                                <ul id="nav">
                                    <li><a href="index.html">Halaman Utama</a></li>
                                    <!-- <li><a href="#">Pages</a>
                                        <ul class="dropdown">
                                            <li><a href="./index.html">- Home</a></li>
                                            <li><a href="./about.html">- About</a></li>
                                            <li><a href="./gallery.html">- Gallery</a></li>
                                            <li><a href="./blog.html">- Blog</a></li>
                                            <li><a href="./single-blog.html">- Blog Details</a></li>
                                            <li><a href="./contact.html">- Contact</a></li>
                                            <li><a href="#">- Dropdown</a>
                                                <ul class="dropdown">
                                                    <li><a href="#">- Dropdown Item</a></li>
                                                    <li><a href="#">- Dropdown Item</a></li>
                                                    <li><a href="#">- Dropdown Item</a></li>
                                                    <li><a href="#">- Dropdown Item</a></li>
                                                </ul>
                                            </li>
                                        </ul>
                                    </li>
                                    <li><a href="./about.html">About</a></li>
                                    <li><a href="./gallery.html">Gallery</a></li> -->
                                    <li><a href="login.html">Login</a></li>
                                    <li><a href="contact.html">Kontak</a></li>
                                </ul>

                                <!-- Search Icon -->
                                <!-- <div class="search-icon" data-toggle="modal" data-target="#searchModal"><i class="ti-search"></i></div> -->
                            </div>
                            <!-- Nav End -->
                        </div>
                    </nav>
                </div>
            </div>
        </div>
    </header>
    <!-- Header Area End -->

    <!-- Breadcrumb Area Start -->
    <section class="breadcrumb-area bg-img bg-overlay jarallax" style="background-image: url(img/bg-img/2.jpg);">
        <div class="container h-100" >
            <div class="row h-100 align-items-center">
                <div class="col-12">
                    <div class="breadcrumb-content text-center">
                        <h2 class="page-title">Halaman Pendaftaran</h2>
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb justify-content-center">
                                <li class="breadcrumb-item"><a href="index.html"><i class="icon_house_alt"></i> Halaman Utama</a></li>
                                <li class="breadcrumb-item active" aria-current="page">Daftar</li>
                            </ol>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Breadcrumb Area End -->

    

   

    

    <!-- Comment Area Start -->
    <br>
    <div class="comment-area section-padding-0">
        <div class="container" style="background-color: aliceblue; border-radius: 25px;">
            <div class="row justify-content-center">
                <div class="col-lg-9">
                    

                    <!-- Leave A Reply -->
                    <div class="alime-contact-form mt-30">
                        <!-- <h4 class="mb-30">Login</h4> -->

                        <!-- Form -->
                        <form id="sini_form">
                            <div class="row">
                                <div class="col-12 col-md-6">
                                    <input type="text" name="username" id="username" class="form-control mb-15" placeholder="Username" style="color: black;">
                                </div>
                                <div class="col-12 col-md-6">
                                    <input type="password" name="password" id="password" class="form-control mb-15" placeholder="Password" style="color: black;">
                                </div>
                                <div class="col-12">
                                    <input type="password" name="konfirmasi_password" id="konfirmasi_password" class="form-control mb-15" placeholder="Konfirmasi Password" style="color: black;">
                                </div>
                                <div class="col-12">
                                    <input type="text" name="nama" id="nama" class="form-control mb-15" placeholder="Nama" style="color: black;">
                                </div>
                                <div class="col-12">
                                    <input type="email" name="email" id='email' class="form-control mb-15" placeholder="Email" style="color: black;">
                                </div>
                                <div class="col-12 col-md-6">
                                    <input type="text" name="umur" id="umur" minlength="1" maxlength="2"  class="form-control mb-15 numbersOnly" placeholder="Umur" style="color: black;">
                                </div>
                                <div class="col-12 col-md-6">
                                    <select class="form-control mb-15" name="jk" id="jk" style="color: black;">
                                        <option  selected disabled>-Pilih Jenis Kelamin</option>
                                        <option value="Laki-laki">Laki-laki</option>
                                        <option value="Perempuan">Perempuan</option>
                                    </select>
                                </div>
                                <div class="col-12">
                                    <textarea name="alamat" id="alamat" class="form-control mb-10" placeholder="Alamat" style="color: black;"></textarea>
                                </div>
                                <div class="col-12">
                                    <center><button type="button" onclick="daftar()" class="btn alime-btn btn-2 mt-15 mb-15">Daftar</button></center>
                                </div>
                                <div class="col-12">
                                    <center class="mb-10">Kembali ke <a href="login.html" style="color: blue;"> Halaman Login</a></center>
                                </div>
                            </div>
                        </form>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <!-- Comment Area End -->
    
     <!-- Footer Area Start -->
     <footer class="footer-area">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="footer-content d-flex align-items-center justify-content-between">
                        <!-- Copywrite Text -->
                        <div class="copywrite-text">
                            <p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                                Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="fa fa-heart-o" aria-hidden="true"></i> by <a href="https://kicap-karan.com" target="_blank">Kicap Karan</a>.  
                                <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                            </p>
                        </div>
                        <!-- Footer Logo -->
                        <!-- <div class="footer-logo">
                            <a href="#"><img src="img/core-img/logo2.png" alt=""></a>
                        </div> -->
                        <!-- Social Info -->
                        <div class="social-info">
                            <a href="#"><i class="ti-facebook" aria-hidden="true"></i></a>
                            <a href="#"><i class="ti-instagram" aria-hidden="true"></i></a>
                            <a href="#"><i class="ti-linkedin" aria-hidden="true"></i></a>
                            <a href="#"><i class="ti-youtube" aria-hidden="true"></i></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- Footer Area End -->

    

    <!-- **** All JS Files ***** -->
    <!-- jQuery 2.2.4 -->
    <script src="js/jquery.min.js"></script>
    <!-- Popper -->
    <script src="js/popper.min.js"></script>
    <!-- Bootstrap -->
    <script src="js/bootstrap.min.js"></script>
    <!-- All Plugins -->
    <script src="js/alime.bundle.js"></script>
    <!-- Active -->
    <script src="js/default-assets/active.js"></script>
    <script src="sweet-alert/sweetalert.js"></script>
    <script src="sweet-alert/toastr/toastr.min.js"></script>
    <link rel="stylesheet" type="text/css" href="sweet-alert/toastr/toastr.min.css">
    <script src="sweet-alert/block/jquery.blockUI.js"></script>
    <script src="main.js"></script>

    <script>
        function daftar(){
            //check if all input in form='sini_form' is filled and focus on first empty input dan dan cek jika password dan konfirmasi password sama maka toast error
            let username = $('#username').val();
            let password = $('#password').val();
            let konfirmasi_password = $('#konfirmasi_password').val();
            let nama = $('#nama').val();
            let email = $('#email').val();
            let umur = $('#umur').val();
            let jk = $('#jk').val();
            let alamat = $('#alamat').val();

            if(username == ''){
                toastr.error('Username tidak boleh kosong');
                $('#username').focus();
            }else if(password == ''){
                toastr.error('Password tidak boleh kosong');
                $('#password').focus();
            }else if(konfirmasi_password == ''){
                toastr.error('Konfirmasi Password tidak boleh kosong');
                $('#konfirmasi_password').focus();
            }else if(nama == ''){
                toastr.error('Nama tidak boleh kosong');
                $('#nama').focus();
            }else if(email == ''){
                toastr.error('Email tidak boleh kosong');
                $('#email').focus();
            }else if(umur == ''){
                toastr.error('Umur tidak boleh kosong');
                $('#umur').focus();
            }else if(jk == '' || jk == null){
                toastr.error('Jenis Kelamin harus dipilih');
                $('#jk').focus();
            }else if(alamat == ''){
                toastr.error('Alamat tidak boleh kosong');
                $('#alamat').focus();
            }else if(password != konfirmasi_password){
                toastr.error('Password dan Konfirmasi Password tidak sama');
                $('#konfirmasi_password').focus();
            }else{
                //bikin var data untuk menampung semua data yang diinputkan
                let data = {
                    username: username,
                    password: password,
                    nama: nama,
                    email: email,
                    umur: umur,
                    jk: jk,
                    alamat: alamat
                };
                //kirim data ke server
                $.ajax({
                    url: url+'user_daftar',
                    type: 'POST',
                    data: {data: data},
                    headers: {
                        //basicAuth username="Kicap_karan", password="karan_kicap456" 
                        'Authorization': 'Basic ' + btoa('Kicap_karan' + ':' + 'karan_kicap456') 
                    },
                    beforeSend: function(){
                       sedang_proses();
                    },
                    success: function(response){
                        $.unblockUI();
                        swal({
                            icon: 'success',
                            text: "Email telah dikirim, silah tunggu konfirmasi dari admin",
                            type: "success",
                            confirmButtonColor: "#DD6B55",
                            confirmButtonText: "Ok",
                            closeOnConfirm: false
                        }).
                        then((result) => {
                            window.location.href = "index.html";
                        });
                    },
                    error: function(xhr, ajaxOptions, thrownError){
                        $.unblockUI();
                        
                        if(xhr.status == 401){
                            // sweet alaert error "Email dalam proses pendaftaran dan menunggu pengesahan admin"
                            swal({
                                icon: 'error',
                                text: "Email dalam proses pendaftaran dan menunggu pengesahan admin",
                                type: "error",
                                confirmButtonColor: "#DD6B55",
                                confirmButtonText: "Ok",
                                closeOnConfirm: false
                            })
                        }else if(xhr.status == 402){
                            // sweet alaert error "Email sudah terdaftar"
                            swal({
                                icon: 'error',
                                text: "Email sudah terdaftar",
                                type: "error",
                                confirmButtonColor: "#DD6B55",
                                confirmButtonText: "Ok",
                                closeOnConfirm: false
                            })
                        }else{
                            //buat sweet alert 2 button dengan text "Refresh Halaman" untuk refresh halaman dan button dengan text "Close" untuk menutup sweet alert 2
                            swal({
                                title: "Error",
                                text: thrownError +"\nSila Refresh Halaman",
                                icon: "warning",
                                buttons: {
                                    cancel: {
                                        text: "Cancel",
                                        value: null,
                                        visible: true,
                                        className: "",
                                        closeModal: true,
                                    },
                                    confirm: {
                                        text: "Refresh Halaman",
                                        value: true,
                                        visible: true,
                                        className: "",
                                        closeModal: true
                                    }
                                }
                            })
                            .then((value) => {
                                
                                if(value){
                                    //refresh halaman
                                    location.reload();
                                }
                                
                            
                            });
                        
                        }
                        
                    }
                });
                
            }

            
            
        }
    </script>

</body>

</html>