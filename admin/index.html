<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

<link rel="icon" href="favicon.ico" type="image/x-icon"/>

<title>Sistem Stimulasi & Intervensi Dini Pertumbuhan Anak 1 Hingga 5 Tahun - Halaman Login</title>

<!-- Bootstrap Core and vandor -->
<link rel="stylesheet" href="assets/plugins/bootstrap/css/bootstrap.min.css" />

<!-- Core css -->
<link rel="stylesheet" href="assets/style.min.css"/>
<link rel="stylesheet" href="assets/sweetalert/sweetalert.css">

</head>
<body class="font-muli theme-cyan gradient">

<div class="auth option2">
    <div class="auth_left">
        <div class="card">
            <div class="card-body">
                <div class="text-center">
                    <a class="header-brand" href="index.html"><i class="fa fa-graduation-cap brand-logo"></i></a>
                    <div class="card-title mt-3">Login Admin</div>
                    

                </div>
                <div class="form-group">
                    <input type="tex" class="form-control" id="username" aria-describedby="emailHelp" placeholder="Masukkan Username">
                </div>
                <div class="form-group">
                    <!-- <label class="form-label"><a href="forgot-password.html" class="float-right small">I forgot password</a></label> -->
                    <input type="password" class="form-control" id="password" placeholder="Masukkan Password">
                </div>
                <div class="text-center">
                    <button type="button" class="btn btn-primary btn-block" title="Login" onclick="login()">Login</button>
                    <!-- <div class="text-muted mt-4">Don't have account yet? <a href="register.html">Sign up</a></div> -->
                </div>
            </div>
        </div>        
    </div>
</div>

<!-- Start Main project js, jQuery, Bootstrap -->
<script src="assets/lib.vendor.bundle.js"></script>

<!-- Start project main js  and page js -->
<script src="assets/core.js"></script>
<script src="assets/toastr/toastr.min.js"></script>
<link rel="stylesheet" type="text/css" href="assets/toastr/toastr.min.css">
<script src="assets/sweetalert/sweetalert.js"></script>
<script src="assets/block/jquery.blockUI.js"></script>
<script src="main.js"></script>
<script>
  //create function login
  function login(){
    var username = $('#username').val();
    var password = $('#password').val();
    //if username empty or null toasts "Username harus diisi" and focus on username, else if password empty or null toasts "Password harus diisi" and focus on password, else if username and password not empty and not null, then console.log('ok')
    if(username == '' || username == null){
      toastr.error('Username harus diisi');
      $('#username').focus();
    }else if(password == '' || password == null){
      toastr.error('Password harus diisi');
      $('#password').focus();
    }else{
      $.ajax({
        url: url+'login_admin',
        type: 'GET',
        data: {username: username, password: password},
        crossDomain: true,
        beforeSend: function (request) {
            sedang_proses()
            request.setRequestHeader("Authorization", "Basic " + btoa("Kicap_karan:karan_kicap456"));
            
        },
        success: function(response){
          $.unblockUI();
          // console.log(response);
          if(response.status == 'success'){
            //create session
            sessionStorage.setItem('data', JSON.stringify(response.data));
            //create swal login success
            swal({
              title: "Login Berhasil",
              text: "Selamat datang di halaman admin",
              type: "success",
              showCancelButton: false,
              confirmButtonColor: "#DD6B55",
              confirmButtonText: "OK",
              closeOnConfirm: false
            }).
            then(function(){
              window.location.href = "admin_index.html";
            });
          }
          
        },
        error: function(response){
          // console.log(response.status);
          //if response.status = 400, then toasts "Username atau Password salah", else swal "Jaringan Mungkin Bermasalah" with button "OK" to reload page , if click "OK" then reload page
          $.unblockUI();
          if(response.status == 400){
            toastr.error('Username atau Password salah');
          }else{
            swal({
              title: "Jaringan Mungkin Bermasalah",
              text: "Tekan OK untuk reload halaman",
              type: "error",
              showCancelButton: false,
              confirmButtonColor: "#DD6B55",
              confirmButtonText: "OK",
              closeOnConfirm: false,
              value: true
            }).
            then(function(value){
              if(value == true){
                location.reload();
              } 
            });
          }
          
        }
      });
    
    }

      
  }
</script>
</body>
</html>